<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Increase your bandwidth</title>
  </head>
  <body>
    <script type="text/javascript">
      function addCharacter(character, position) {
        let charElement

        charElement = document.createElement('pre')
        charElement.style.display = 'inline'

        if ( character === ' ' ) {
          character = '·'
          charElement.style.color = '#DDD'
        } else if ( character === '\n' ) {
          character = '¬'
          charElement.style.color = '#DDD'
        }

        const charText = document.createTextNode(character)
        charElement.appendChild(charText)

        charElement.id = position
        wordsDiv.appendChild(charElement)

        if ( character === '¬') {
          wordsDiv.appendChild(document.createElement('br'))
        }
        return charElement
      }

      function unhighlightPosition(position) {
        charElements[position].style.backgroundColor = null
      }

      function highlightPosition(position) {
        charElements[position].style.backgroundColor = '#BBB'
      }

      Object.assign(document.body.style, {
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center'
      })

      const wordsDiv = document.createElement('div')
      document.body.appendChild(wordsDiv)

      const text = `var after = require('after');
var should = require('should');
var express = require('../')
  , Route = express.Route
  , methods = require('methods')
  , assert = require('assert');`

      const charElements = text.split('').map(addCharacter)

      let position = 0

      window.addEventListener('keydown', e => {
        if (e.key.length !== 1 && e.key !== 'Enter') return

        if (e.key === ' ') e.preventDefault()

        charElements[position].style.color =
          e.key === text.charAt(position)
            ? '#7B7'
            : '#F00'

        if ( e.key === 'Enter' && text.charAt(position) === '\n' ) {
          charElements[position].style.color = '#7B7'
        }

        unhighlightPosition(position)
        position++
        highlightPosition(position)
      })
    </script>
  </body>
</html>
